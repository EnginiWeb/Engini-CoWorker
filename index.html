<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Engini CoWorker</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600&display=swap" rel="stylesheet"/>

  <!-- Tailwind (keep; CDN is fine) -->
  <script src="https://cdn.tailwindcss.com" defer></script>

  <style>
    :root{
      --bg:#0B0C0E; --bg2:#0F1012; --card:#151618; --ink:#E7E7EA;
      --muted:#9CA3AF; --line:rgba(255,255,255,.10); --line-strong:rgba(255,255,255,.18);
      --shadow:0 16px 40px rgba(0,0,0,.45);
      --accent:#8E7AEF;
    }
    html,body{background:var(--bg);color:var(--ink)}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial}
    .font-poppins{font-family:Poppins,Inter,ui-sans-serif,system-ui}

    /* Cards */
    .wc-card{background:var(--card);border:1px solid var(--line);border-radius:1.5rem;padding:1.25rem;box-shadow:var(--shadow);transition:transform .2s ease,border-color .2s ease}
    .wc-card:hover{transform:translateY(-2px);border-color:var(--line-strong)}
    .wc-avatar{width:48px;height:48px;border-radius:999px;display:grid;place-items:center;border:2px solid rgba(255,255,255,.85);box-shadow:0 0 0 4px rgba(255,255,255,.10) inset}
    .wc-badge{letter-spacing:.16em;color:rgba(255,255,255,.55)}
    .wc-divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent)}
    .wc-pill{padding:.48rem .85rem;border-radius:9999px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);font-size:.92rem;line-height:1;color:#E5E7EB;white-space:nowrap}
    .wc-pill.dim{opacity:.6}
    .wc-app img{width:22px;height:22px;border-radius:6px;display:block}
    .wc-app .fallback{width:22px;height:22px;border-radius:6px;display:grid;place-items:center;background:#0F1012;border:1px solid rgba(255,255,255,.15);font-size:.7rem;color:#fff}
    .wc-chev{transition:transform .24s ease}
    .wc-card[aria-expanded="true"] .wc-chev{transform:rotate(180deg)}
    .nav-chip{border:1px solid var(--line);background:rgba(255,255,255,.05)}

    /* Smooth expandable section */
    .wc-more{height:0;overflow:hidden;opacity:0;transition:height .34s ease,opacity .24s ease;will-change:height}
    .wc-card[aria-expanded="true"] .wc-more{opacity:1}

    /* Spotlight */
    .spline-loader{position:absolute;inset:0;display:grid;place-items:center;color:#A3A3A3;font-size:.9rem}

    /* Evolution SVG helpers */
    .era svg{display:block}
    .era .panel{fill:#151618;stroke:rgba(255,255,255,.10)}
    .era .node{fill:#1B1D22;stroke:rgba(255,255,255,.14)}
    .era .label{fill:#E5E7EB}
    .era .sub{fill:#A3A3A3}
    .era .wire{stroke:url(#gradWire);stroke-width:2.5;fill:none;stroke-linecap:round;filter:url(#glow)}
    .era .dashed{stroke-dasharray:12 10;animation:dash 8s linear infinite}
    @keyframes dash{to{stroke-dashoffset:-600}}

    /* Chat extras */
    .typing{background:#151618;border:1px solid rgba(255,255,255,.10);padding:.5rem .75rem;border-radius:1rem;display:flex;gap:.3rem;align-items:center}
    .typing .dot{width:6px;height:6px;border-radius:9999px;background:#a3a3a3;opacity:.6;animation:dot 1.2s infinite}
    .typing .dot:nth-child(2){animation-delay:.2s}
    .typing .dot:nth-child(3){animation-delay:.4s}
    @keyframes dot{0%,80%,100%{transform:translateY(0)}40%{transform:translateY(-4px)}}
    .spin{width:18px;height:18px;border-radius:9999px;border:2px solid #0B0C0E;border-top-color:#fff;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}


    /* ===== Custom Scrollbar (modern browsers) ===== */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg-2, #0F1012);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #8E7AEF, #5CDEFF);
  border-radius: 10px;
  border: 2px solid var(--bg-2, #0F1012);
  box-shadow: 0 0 6px rgba(142,122,239,0.4);
  transition: background 0.3s ease, box-shadow 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #A99EFF, #7BE4FF);
  box-shadow: 0 0 10px rgba(142,122,239,0.7), 0 0 4px rgba(92,221,255,0.6);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #8E7AEF var(--bg-2, #0F1012);
}

  </style>
</head>
<body class="min-h-screen flex flex-col bg-[#0B0C0E] text-neutral-200">

<header class="sticky top-0 z-50 bg-transparent">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl mt-3 shadow-md">
    <a href="index.html" class="flex items-center space-x-2">
      <img src="image.png" alt="Engini-logo" class="w-24 sm:w-28 h-auto" fetchpriority="high"/>
    </a>

    <div class="flex-grow flex justify-center">
      <div class="flex items-center space-x-6 text-sm font-medium text-neutral-300">
        <!-- Solutions -->
        <div class="relative group">
          <button class="hover:text-white transition-colors peer px-4 py-3">Solutions</button>
          <div class="absolute left-1/2 -translate-x-1/3 top-full mt-0 pt-2 w-[1000px] p-6 rounded-xl bg-[#1B1D22] border border-white/10 shadow-xl z-50 opacity-0 pointer-events-none transition duration-200 group-hover:opacity-100 group-hover:pointer-events-auto hover:opacity-100 hover:pointer-events-auto">
            <div class="grid grid-cols-4 gap-8 text-white text-sm">
              <div>
                <p class="uppercase text-xs font-semibold tracking-wide text-white/60 mb-4">App Integrations</p>
                <ul class="space-y-3">
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/salesforce.png" class="w-6 h-5" alt="Salesforce"/><a href="app.html">Salesforce</a></li>
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/slack.png" class="w-6 h-6" alt="Slack"/><a href="app.html">Slack</a></li>
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/marketo.png" class="w-6 h-6" alt="Marketo"/><a href="app.html">Marketo</a></li>
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/netsuite.png" class="w-6 h-6" alt="NetSuite"/><a href="app.html">NetSuite</a></li>
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/servicenow.png" class="w-6 h-6" alt="ServiceNow"/><a href="app.html">ServiceNow</a></li>
                  <li class="flex items-center gap-2"><img loading="lazy" src="icons/workday.png" class="w-6 h-6" alt="Workday"/><a href="app.html">Workday</a></li>
                  <li><a href="app.html" class="text-white underline hover:no-underline font-medium flex items-center gap-1">View all <span>â†—</span></a></li>
                </ul>
              </div>
              <div>
                <p class="uppercase text-xs font-semibold tracking-wide text-white/60 mb-4">By Function</p>
                <ul class="space-y-2">
                  <li><a href="functions.html#it" class="hover:underline">IT</a></li>
                  <li><a href="functions.html#finance" class="hover:underline">Finance</a></li>
                  <li><a href="functions.html#support" class="hover:underline">Support</a></li>
                  <li><a href="functions.html#hr" class="hover:underline">HR</a></li>
                  <li><a href="functions.html#marketing" class="hover:underline">Marketing</a></li>
                  <li><a href="functions.html#sales" class="hover:underline">Sales</a></li>
                  <li><a href="functions.html#revops" class="hover:underline">Revenue Operations</a></li>
                  <li><a href="functions.html#product" class="hover:underline">Product (Embed)</a></li>
                </ul>
              </div>
              <div>
                <p class="uppercase text-xs font-semibold tracking-wide text-white/60 mb-4">By Use Case</p>
                <ul class="space-y-2">
                  <li><a href="use Cases.html#order-to-cash" class="hover:underline">Order-to-cash</a></li>
                  <li><a href="use Cases.html#employee-onboarding" class="hover:underline">Employee onboarding</a></li>
                  <li><a href="use Cases.html#enterprise-ipaas" class="hover:underline">Enterprise iPaaS</a></li>
                  <li><a href="use Cases.html#product-led-sales" class="hover:underline">Product-led sales</a></li>
                  <li><a href="use Cases.html#embedded-integrations" class="hover:underline">Embedded Integrations</a></li>
                  <li><a href="use Cases.html#all" class="text-white underline hover:no-underline font-medium flex items-center gap-1">View all <span>â†—</span></a></li>
                </ul>
              </div>
              <div>
                <p class="uppercase text-xs font-semibold tracking-wide text-white/60 mb-4">By Industry</p>
                <ul class="space-y-2">
                  <li><a href="industries.html" class="hover:underline">Manufacturing</a></li>
                  <li><a href="industries.html" class="hover:underline">Financial services</a></li>
                  <li><a href="industries.html" class="hover:underline">Retail</a></li>
                  <li><a href="industries.html" class="hover:underline">Logistics</a></li>
                  <li><a href="industries.html" class="hover:underline">Healthcare</a></li>
                  <li><a href="industries.html" class="hover:underline">Media</a></li>
                  <li><a href="industries.html" class="hover:underline">BPO</a></li>
                  <li><a href="industries.html" class="hover:underline">Non-profit</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Platform -->
        <div class="relative group">
          <button class="hover:text-white transition-colors peer px-4 py-3">Platform</button>
          <div class="absolute left-1/2 -translate-x-1/2 top-full mt-0 pt-2 w-72 p-4 rounded-xl bg-[#1B1D22] border border-white/10 shadow-xl z-50 opacity-0 pointer-events-none transition duration-200 group-hover:opacity-100 group-hover:pointer-events-auto hover:opacity-100 hover:pointer-events-auto">
            <ul class="space-y-2 text-sm text-white">
              <li><a href="platform.html" class="hover:underline">Architecture</a></li>
              <li><a href="platform.html" class="hover:underline">Agent Operating System</a></li>
              <li><a href="platform.html" class="hover:underline">Security</a></li>
              <li><a href="platform.html" class="hover:underline">Connectors</a></li>
              <li><a href="platform.html" class="hover:underline">Workflow Builder</a></li>
              <li><a href="platform.html" class="hover:underline">AI Playbooks</a></li>
            </ul>
          </div>
        </div>

        <!-- Resources -->
        <div class="relative group">
          <button class="hover:text-white transition-colors peer px-4 py-3">Resources</button>
          <div class="absolute left-1/2 -translate-x-1/2 top-full mt-0 pt-2 w-72 p-4 rounded-xl bg-[#1B1D22] border border-white/10 shadow-xl z-50 opacity-0 pointer-events-none transition duration-200 group-hover:opacity-100 group-hover:pointer-events-auto hover:opacity-100 hover:pointer-events-auto">
            <ul class="space-y-2 text-sm text-white">
              <li><a href="https://engini.io/help/" class="hover:underline">Documentation</a></li>
              <li><a href="https://engini.io/blog/" class="hover:underline">Blog</a></li>
              <li><a href="https://www.youtube.com/watch?v=EWs_WZCnUT8&list=PL7Z1lkK9TitWIeOkB6GN8f1h7cfsb1CVz" class="hover:underline">Webinars</a></li>
            </ul>
          </div>
        </div>

        <!-- Partners -->
        <div class="relative group">
          <button class="hover:text-white transition-colors peer px-4 py-3">Partners</button>
          <div class="absolute left-1/2 -translate-x-1/2 top-full mt-0 pt-2 w-72 p-4 rounded-xl bg-[#1B1D22] border border-white/10 shadow-xl z-50 opacity-0 pointer-events-none transition duration-200 group-hover:opacity-100 group-hover:pointer-events-auto hover:opacity-100 hover:pointer-events-auto">
            <ul class="space-y-2 text-sm text-white">
              <li><a href="https://engini.io/become-a-partner/" class="hover:underline">Become a Partner</a></li>
              <li><a href="https://engini.io/become-a-partner/" class="hover:underline">Technology Partners</a></li>
            </ul>
          </div>
        </div>

        <a href="#workspace-section" class="hover:text-white transition-colors px-3 py-3">Workspace</a>
        <a href="my-workers.html" class="hover:text-white transition-colors px-3 py-3">My Workers</a>
      </div>
    </div>
  </nav>
</header>

<!-- Hero + Chat -->
<section class="relative flex flex-col items-center justify-start pt-12 sm:pt-20 pb-4 sm:pb-6 bg-gradient-to-b from-[#0B0C0E] via-[#0F1012] to-[#151618]">
  <div class="text-center max-w-3xl mx-auto px-4 mb-6">
    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-poppins font-semibold text-white leading-tight">AI Agent Orchestration.</h1>
    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-poppins font-semibold text-white leading-tight mt-1">Agentic Workforce Ready.</h1>
    <p class="text-base sm:text-lg text-neutral-300 mt-4">Integrate AI Agents Seamlessly Across Legacy, Cloud, and SaaS Systems.</p>
  </div>

  <!-- Buttons + Robot -->
  <div class="flex flex-wrap lg:flex-nowrap gap-12 justify-center items-center my-16 px-4 relative">
    <a href="#ipass-evolution" class="w-72 h-64 bg-gradient-to-br from-[#1A1C20] via-[#23252A] to-[#101113] text-white rounded-3xl shadow-[0_10px_20px_rgba(0,0,0,0.8),inset_0_2px_4px_rgba(255,255,255,0.05)] border border-white/10 hover:border-white/30 text-2xl font-semibold transform hover:-translate-y-3 hover:scale-[1.07] hover:shadow-[0_25px_60px_rgba(0,0,0,0.95),0_0_20px_rgba(142,122,239,0.35)] transition-all duration-300 ease-in-out flex items-center justify-center relative overflow-hidden text-center group">
      <div class="absolute inset-0 bg-gradient-to-t from-white/5 to-transparent rounded-3xl opacity-40 group-hover:opacity-70 transition-all"></div>
      <div class="absolute -top-1/2 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-y-12 opacity-0 group-hover:opacity-40 group-hover:translate-x-16 transition-all duration-500"></div>
      <div class="z-10">AI Agents <span class="block text-lg font-medium opacity-70">Orchestration</span></div>
    </a>

    <div class="hidden md:block w-0.5 h-60 bg-gradient-to-b from-transparent via-white/30 to-transparent rounded"></div>

    <a href="#workspace-section" class="w-72 h-64 bg-gradient-to-br from-[#1A1C20] via-[#23252A] to-[#101113] text-white rounded-3xl shadow-[0_10px_20px_rgba(0,0,0,0.8),inset_0_2px_4px_rgba(255,255,255,0.05)] border border-white/10 hover:border-white/30 text-2xl font-semibold transform hover:-translate-y-3 hover:scale-[1.07] hover:shadow-[0_25px_60px_rgba(0,0,0,0.95),0_0_20px_rgba(142,122,239,0.35)] transition-all duration-300 ease-in-out flex items-center justify-center relative overflow-hidden text-center group">
      <div class="absolute inset-0 bg-gradient-to-t from-white/5 to-transparent rounded-3xl opacity-40 group-hover:opacity-70 transition-all"></div>
      <div class="absolute -top-1/2 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-y-12 opacity-0 group-hover:opacity-40 group-hover:translate-x-16 transition-all duration-500"></div>
      <div class="z-10 text-center">Enterprise<br/><span class="text-lg font-medium opacity-70">Agentic Workers</span></div>
    </a>

    <!-- Spline container (lazy init) -->
    <div class="relative w-[360px] h-[360px] md:w-[420px] md:h-[420px] lg:w-[520px] lg:h-[520px] shrink-0 rounded-3xl overflow-hidden" data-spotlight data-spline-url="https://prod.spline.design/kZDDjO5HuC9GJUM2/scene.splinecode">
      <div class="spotlight" aria-hidden="true"></div>
      <div class="spline-loader" data-spline-loader>Loading 3Dâ€¦</div>
      <div data-spline-mount class="absolute inset-0"></div>

      <div class="absolute left-4 bottom-4 px-3 py-2 rounded-xl border border-white/15 bg-white/10 backdrop-blur-md">
        <div class="text-white text-sm font-semibold">ARIA - Orchestration Bot</div>
        <div class="text-white/80 text-xs">Understands your stack. Plans. Executes. Reports.</div>
      </div>
    </div>
  </div>

  <!-- Chat Shell -->
  <div class="w-full max-w-3xl px-4" id="chat-block">
    <div id="chat-shell" class="relative rounded-3xl shadow-2xl p-6 mt-2 sm:mt-3 flex flex-col justify-between border border-white/10 bg-[#0F1012]">
      <div id="chat-messages" class="chat-messages flex flex-col space-y-4 mb-4 max-h-[48vh] overflow-y-auto">
        <div class="flex justify-start"></div>
      </div>
      <form id="chat-form" class="relative" novalidate autocomplete="off">
        <textarea id="chat-input" rows="2" placeholder="Ask Engini to create a Worker that..." class="w-full p-4 pr-12 rounded-2xl bg-[#1B1D22] text-neutral-100 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-[#8E7AEF] transition resize-none"></textarea>
        <button type="button" id="send-button" class="absolute right-3 top-1/2 -translate-y-1/2 bg-white text-[#0B0C0E] p-2 rounded-xl shadow-md hover:bg-[#7c6ae6] hover:text-white transition">
          <svg id="send-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></svg>
          <div id="send-spin" class="spin hidden"></div>
        </button>
      </form>
    </div>
  </div>
</section>

<!-- Workspace -->
<section id="workspace-section" class="pt-6 sm:pt-10 pb-12 px-4 sm:px-8 lg:px-10 flex-grow">
  <div class="max-w-7xl mx-auto">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-3xl sm:text-4xl font-poppins font-semibold text-white">Workspace</h2>
      <div class="relative">
        <input id="search-input" class="w-72 max-w-[76vw] p-3 pl-10 rounded-2xl bg-[#151618] border border-white/10 text-neutral-200 placeholder-white/40" placeholder="Search Workers...">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 text-white/40 h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      </div>
    </div>
    <div id="worker-cards" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
  </div>
</section>

<!-- Evolution of Automation & Orchestration -->
<section id="ipass-evolution" class="px-4 sm:px-8 lg:px-10 py-24 bg-[#0B0C0E]">
  <style>
    /* ===== Scoped visuals for this section only ===== */
    #ipass-evolution .era svg{width:100%;height:auto;display:block}
    #ipass-evolution .era .panel{rx:16}
    #ipass-evolution .era .node{
      fill:#131418; stroke:rgba(255,255,255,.22); stroke-width:1.6;
      filter:drop-shadow(0 6px 16px rgba(0,0,0,.35));
    }
    #ipass-evolution .era .label{fill:#E8E9ED;font-size:14px;font-weight:600;letter-spacing:.2px}
    #ipass-evolution .era .sub{fill:#BFC3CA}
    #ipass-evolution .era .wire{
      stroke:url(#gradWire); stroke-width:2.6; fill:none; stroke-linecap:round; filter:url(#glow)
    }
    #ipass-evolution .era .wire.dashed{stroke-dasharray:8 8; opacity:.95}
    #ipass-evolution .era .tick{fill:#fff}
    /* Card polish */
    #ipass-evolution .card{
      background:#1C1E22; border:1px solid rgba(255,255,255,.12);
      border-radius:1.25rem; padding:1.75rem; box-shadow:0 18px 40px rgba(0,0,0,.45);
      transition:transform .2s ease, border-color .2s ease, box-shadow .2s ease;
    }
    #ipass-evolution .card:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.24);box-shadow:0 24px 64px rgba(0,0,0,.55)}
    #ipass-evolution .card h4{font-size:1.125rem}
    @media (prefers-reduced-motion: reduce){
      #ipass-evolution .era animateMotion,
      #ipass-evolution .era animateTransform { display:none }
    }
  </style>

  <div class="max-w-7xl mx-auto">
    <header class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-poppins font-semibold text-white">The Evolution of Automation &amp; Orchestration</h2>
      <p class="text-white/70 max-w-3xl mx-auto mt-4 text-base md:text-lg">
        From rigid, rule-based workflows to adaptive, multi-agent orchestration. Each step unlocks more autonomy, context, and business impact.
      </p>
    </header>

    <!-- Subtle rail / milestones -->
    <div class="relative hidden lg:block mb-12">
      <div class="absolute inset-x-0 top-8 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
      <div class="grid grid-cols-4 gap-6">
        <div class="flex justify-center"><span class="w-4 h-4 rounded-full bg-white shadow-[0_0_0_6px_rgba(142,122,239,0.15)]"></span></div>
        <div class="flex justify-center"><span class="w-4 h-4 rounded-full bg-white shadow-[0_0_0_6px_rgba(142,122,239,0.15)]"></span></div>
        <div class="flex justify-center"><span class="w-4 h-4 rounded-full bg-white shadow-[0_0_0_6px_rgba(142,122,239,0.15)]"></span></div>
        <div class="flex justify-center"><span class="w-4 h-4 rounded-full bg-white shadow-[0_0_0_6px_rgba(142,122,239,0.15)]"></span></div>
      </div>
    </div>

    <!-- Bigger, 2-up layout for readability -->
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-8 text-white">

      <!-- 1) Deterministic: Trigger â†’ Action â†’ Action â†’ Result -->
      <article class="card">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-semibold">1980â€“2023</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-white/10">Deterministic</span>
        </div>
        <h4 class="font-semibold text-white mb-4">Block Flow</h4>

        <figure class="mb-6 overflow-hidden rounded-2xl border border-white/10 era">
          <svg viewBox="0 0 640 360" aria-label="Trigger to Actions to Result">
            <defs>
              <pattern id="grid-d" width="24" height="24" patternUnits="userSpaceOnUse">
                <path d="M24 0H0M0 24V0" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
              </pattern>
              <linearGradient id="gradWire" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#BFC1C7"/><stop offset="100%" stop-color="#E5E7EB"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="0" stdDeviation="2.2" flood-color="#E5E7EB" flood-opacity=".55"/>
              </filter>
              <marker id="arrow-d" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
                <path d="M0 0 L10 5 L0 10 Z" fill="#E5E7EB"/>
              </marker>
            </defs>

            <rect class="panel" x="10" y="10" width="620" height="340" fill="url(#grid-d)"/>

            <!-- Blocks -->
            <g>
              <rect class="node" x="36"  y="154" width="120" height="58" rx="14"/>
              <text class="label" x="96"  y="183" text-anchor="middle" dominant-baseline="middle">Trigger</text>

              <rect class="node" x="188" y="154" width="140" height="58" rx="14"/>
              <text class="label" x="258" y="183" text-anchor="middle" dominant-baseline="middle">Action 1</text>

              <rect class="node" x="352" y="154" width="140" height="58" rx="14"/>
              <text class="label" x="422" y="183" text-anchor="middle" dominant-baseline="middle">Action 2</text>

              <rect class="node" x="516" y="154" width="84" height="58" rx="14"/>
              <text class="label" x="558" y="183" text-anchor="middle" dominant-baseline="middle">Result</text>
            </g>

            <!-- Single rigid pipe (aligned to centers) -->
            <path id="flow-d" class="wire" d="M 96 183 H 258 H 422 H 558" marker-end="url(#arrow-d)"/>

            <!-- Moving token -->
            <circle class="tick" r="4.2">
              <animateMotion dur="7s" repeatCount="indefinite"><mpath href="#flow-d"/></animateMotion>
            </circle>

            <text class="sub" x="320" y="322" text-anchor="middle" dominant-baseline="middle" font-size="13">Trigger â†’ Action â†’ Action â†’ Result</text>
          </svg>
        </figure>

        <p class="text-sm md:text-base text-neutral-300">Fixed, linear logic. Strong for stable rulesâ€”brittle on change or exceptions.</p>
        <ul class="mt-4 text-sm md:text-base text-neutral-300 space-y-2">
          <li>â€¢ Single, predefined path</li>
          <li>â€¢ Manual exception handling</li>
          <li>â€¢ Heavy mapping & maintenance</li>
        </ul>
      </article>

      <!-- 2) AI Agent -->
      <article class="card">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-semibold">2024</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-white/10">Autonomous</span>
        </div>
        <h4 class="font-semibold text-white mb-4">AI Agent</h4>

        <figure class="mb-6 overflow-hidden rounded-2xl border border-white/10 era">
          <svg viewBox="0 0 640 360" aria-label="Agent with planner, memory, LLM, workflow, tools">
            <defs>
              <pattern id="grid-a" width="24" height="24" patternUnits="userSpaceOnUse">
                <path d="M24 0H0M0 24V0" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
              </pattern>
              <linearGradient id="gradWire" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#D0D2D8"/><stop offset="100%" stop-color="#FFFFFF"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="0" stdDeviation="2.2" flood-color="#FFFFFF" flood-opacity=".5"/>
              </filter>
              <marker id="arrow-a" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
                <path d="M0 0 L10 5 L0 10 Z" fill="#E5E7EB"/>
              </marker>
            </defs>

            <rect class="panel" x="10" y="10" width="620" height="340" fill="url(#grid-a)"/>

            <!-- Agent -->
            <g>
              <circle cx="320" cy="180" r="42" fill="#0F1012" stroke="rgba(255,255,255,.28)"/>
              <circle cx="320" cy="180" r="28" fill="#1B1D22" stroke="rgba(255,255,255,.18)"/>
              <text class="label" x="320" y="180" text-anchor="middle" dominant-baseline="middle">Agent</text>
              <circle cx="320" cy="180" r="64" fill="none" stroke="rgba(255,255,255,.18)" stroke-dasharray="7 9">
                <animateTransform attributeName="transform" type="rotate" from="0 320 180" to="360 320 180" dur="16s" repeatCount="indefinite"/>
              </circle>
            </g>

            <!-- Modules -->
            <g>
              <rect class="node" x="280" y="42"  width="80" height="44" rx="12"/>
              <text class="label" x="320" y="64"  text-anchor="middle" dominant-baseline="middle">Planner</text>

              <rect class="node" x="96"  y="130" width="110" height="44" rx="12"/>
              <text class="label" x="151" y="152" text-anchor="middle" dominant-baseline="middle">Memory</text>

              <rect class="node" x="454" y="130" width="110" height="44" rx="12"/>
              <text class="label" x="509" y="152" text-anchor="middle" dominant-baseline="middle">LLM</text>

              <rect class="node" x="120" y="244" width="102" height="44" rx="12"/>
              <text class="label" x="171" y="266" text-anchor="middle" dominant-baseline="middle">Tools</text>

              <rect class="node" x="418" y="244" width="120" height="44" rx="12"/>
              <text class="label" x="478" y="266" text-anchor="middle" dominant-baseline="middle">Workflow</text>
            </g>

            <!-- Wires -->
            <path id="ap" class="wire dashed" d="M 320 146 V 86" marker-end="url(#arrow-a)"/>
            <path id="am" class="wire dashed" d="M 292 180 H 206" marker-end="url(#arrow-a)"/>
            <path id="al" class="wire dashed" d="M 348 180 H 454" marker-end="url(#arrow-a)"/>
            <path id="at" class="wire dashed" d="M 300 206 L 221 244" marker-end="url(#arrow-a)"/>
            <path id="aw" class="wire dashed" d="M 340 206 L 418 244" marker-end="url(#arrow-a)"/>

            <circle class="tick" r="4"><animateMotion dur="6.2s" repeatCount="indefinite"><mpath href="#ap"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.5s" repeatCount="indefinite"><mpath href="#am"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.4s" repeatCount="indefinite"><mpath href="#al"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#at"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="7s"   repeatCount="indefinite"><mpath href="#aw"/></animateMotion></circle>

            <text class="sub" x="320" y="322" text-anchor="middle" dominant-baseline="middle" font-size="13">Agent uses Planner, Memory, LLM, Tools &amp; Workflow</text>
          </svg>
        </figure>

        <p class="text-sm md:text-base text-neutral-300">The agent perceives, plans, and actsâ€”calling tools and workflows while retaining context in memory.</p>
        <ul class="mt-4 text-sm md:text-base text-neutral-300 space-y-2">
          <li>â€¢ Planning loop with tool use</li>
          <li>â€¢ Context memory + LLM reasoning</li>
          <li>â€¢ Executes or triggers workflows</li>
        </ul>
      </article>

      <!-- 3) Agentic Workflow -->
      <article class="card">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-semibold">2025</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-white/10">Sequential + Parallel</span>
        </div>
        <h4 class="font-semibold text-white mb-4">Agentic Workflow</h4>

        <figure class="mb-6 overflow-hidden rounded-2xl border border-white/10 era">
          <svg viewBox="0 0 640 360" aria-label="Parallel branches with agents">
            <defs>
              <pattern id="grid-w" width="24" height="24" patternUnits="userSpaceOnUse">
                <path d="M24 0H0M0 24V0" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
              </pattern>
              <linearGradient id="gradWire" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#D0D4DA"/><stop offset="100%" stop-color="#FFFFFF"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="0" stdDeviation="2.2" flood-color="#FFFFFF" flood-opacity=".5"/>
              </filter>
              <marker id="arrow-w" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
                <path d="M0 0 L10 5 L0 10 Z" fill="#E5E7EB"/>
              </marker>
            </defs>

            <rect class="panel" x="10" y="10" width="620" height="340" fill="url(#grid-w)"/>

            <!-- Centers: Trigger(88,183) A(292,103) Act(292,239) B(444,183) Res(576,183) -->
            <rect class="node" x="32" y="158" width="112" height="50" rx="14"/>
            <text class="label" x="88" y="183" text-anchor="middle" dominant-baseline="middle">Trigger</text>
            <path id="split" class="wire" d="M 144 183 H 210" marker-end="url(#arrow-w)"/>

            <rect class="node" x="232" y="78" width="120" height="50" rx="14"/>
            <text class="label" x="292" y="103" text-anchor="middle" dominant-baseline="middle">Agent A</text>
            <path id="bTop" class="wire dashed" d="M 210 183 Q 252 150 232 103" />

            <rect class="node" x="232" y="214" width="120" height="50" rx="14"/>
            <text class="label" x="292" y="239" text-anchor="middle" dominant-baseline="middle">Action 1</text>
            <path id="bBot" class="wire dashed" d="M 210 183 Q 252 216 232 239" />

            <rect class="node" x="384" y="158" width="120" height="50" rx="14"/>
            <text class="label" x="444" y="183" text-anchor="middle" dominant-baseline="middle">Agent B</text>
            <path id="jTop" class="wire" d="M 352 103 Q 372 143 384 183" marker-end="url(#arrow-w)"/>
            <path id="jBot" class="wire" d="M 352 239 Q 372 213 384 183" marker-end="url(#arrow-w)"/>

            <rect class="node" x="532" y="158" width="88" height="50" rx="14"/>
            <text class="label" x="576" y="183" text-anchor="middle" dominant-baseline="middle">Result</text>
            <path id="toRes" class="wire" d="M 504 183 H 532" marker-end="url(#arrow-w)"/>

            <!-- Tokens -->
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#split"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#bTop"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#bBot"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" begin="1s" repeatCount="indefinite"><mpath href="#jTop"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" begin="1s" repeatCount="indefinite"><mpath href="#jBot"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" begin="2s" repeatCount="indefinite"><mpath href="#toRes"/></animateMotion></circle>

            <text class="sub" x="320" y="322" text-anchor="middle" dominant-baseline="middle" font-size="13">Trigger â†’ (Agent A âˆ¥ Action 1) â†’ Agent B â†’ Result</text>
          </svg>
        </figure>

        <p class="text-sm md:text-base text-neutral-300">Sequences that branch and rejoinâ€”agents execute alongside actions with policy checks and handoffs.</p>
        <ul class="mt-4 text-sm md:text-base text-neutral-300 space-y-2">
          <li>â€¢ Parallel &amp; sequential steps</li>
          <li>â€¢ Human/agent checkpoints</li>
          <li>â€¢ Retries, rollbacks, joins</li>
        </ul>
      </article>

      <!-- 4) Orchestration -->
      <article class="card">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-xl font-semibold">2026 &amp; Beyond</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-white/10">Orchestrated</span>
        </div>
        <h4 class="font-semibold text-white mb-4">Agent Orchestration</h4>

        <figure class="mb-6 overflow-hidden rounded-2xl border border-white/10 era">
          <svg viewBox="0 0 640 360" aria-label="Orchestrator with arms to agents and systems">
            <defs>
              <pattern id="grid-o" width="24" height="24" patternUnits="userSpaceOnUse">
                <path d="M24 0H0M0 24V0" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
              </pattern>
              <linearGradient id="gradWire" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#D8DBE1"/><stop offset="100%" stop-color="#FFFFFF"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="0" stdDeviation="2.2" flood-color="#FFFFFF" flood-opacity=".55"/>
              </filter>
              <marker id="arrow-o" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
                <path d="M0 0 L10 5 L0 10 Z" fill="#E5E7EB"/>
              </marker>
            </defs>

            <rect class="panel" x="10" y="10" width="620" height="340" fill="url(#grid-o)"/>

            <!-- Orchestrator -->
            <g>
              <circle cx="320" cy="180" r="36" fill="#0F1012" stroke="rgba(255,255,255,.3)"/>
              <text class="label" x="320" y="180" text-anchor="middle" dominant-baseline="middle">Orchestrator</text>
              <circle cx="320" cy="180" r="72" fill="none" stroke="rgba(255,255,255,.16)" stroke-dasharray="9 11">
                <animateTransform attributeName="transform" type="rotate" from="0 320 180" to="-360 320 180" dur="18s" repeatCount="indefinite"/>
              </circle>
            </g>

            <!-- Arms / Capabilities -->
            <rect class="node" x="72" y="36" width="122" height="44" rx="12"/>
            <text class="label" x="133" y="58" text-anchor="middle" dominant-baseline="middle">Dev Agent</text>
            <path id="arm-dev" class="wire dashed" d="M 282 164 Q 220 110 194 58" marker-end="url(#arrow-o)"/>

            <rect class="node" x="434" y="26" width="144" height="44" rx="12"/>
            <text class="label" x="506" y="48" text-anchor="middle" dominant-baseline="middle">SaaS Agents</text>
            <path id="arm-saas" class="wire dashed" d="M 360 164 Q 432 120 434 48" marker-end="url(#arrow-o)"/>

            <rect class="node" x="62" y="252" width="140" height="44" rx="12"/>
            <text class="label" x="132" y="274" text-anchor="middle" dominant-baseline="middle">Agent Builder</text>
            <path id="arm-builder" class="wire dashed" d="M 280 200 Q 210 230 202 274" marker-end="url(#arrow-o)"/>

            <rect class="node" x="434" y="252" width="140" height="44" rx="12"/>
            <text class="label" x="504" y="274" text-anchor="middle" dominant-baseline="middle">Workflows</text>
            <path id="arm-workflows" class="wire dashed" d="M 360 200 Q 432 230 434 274" marker-end="url(#arrow-o)"/>

            <rect class="node" x="72" y="136" width="122" height="44" rx="12"/>
            <text class="label" x="133" y="158" text-anchor="middle" dominant-baseline="middle">Workspace Agent</text>
            <path id="arm-workspace" class="wire dashed" d="M 284 180 Q 220 180 194 158" marker-end="url(#arrow-o)"/>

            <rect class="node" x="450" y="140" width="122" height="44" rx="12"/>
            <text class="label" x="511" y="162" text-anchor="middle" dominant-baseline="middle">AI Engine</text>
            <path id="arm-ai" class="wire dashed" d="M 360 190 Q 430 175 450 162" marker-end="url(#arrow-o)"/>

            <!-- Moving tokens -->
            <circle class="tick" r="4"><animateMotion dur="7s"  repeatCount="indefinite"><mpath href="#arm-dev"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.6s" repeatCount="indefinite"><mpath href="#arm-saas"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="7.2s" repeatCount="indefinite"><mpath href="#arm-builder"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#arm-workflows"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.8s" repeatCount="indefinite"><mpath href="#arm-workspace"/></animateMotion></circle>
            <circle class="tick" r="4"><animateMotion dur="6.9s" repeatCount="indefinite"><mpath href="#arm-ai"/></animateMotion></circle>

            <text class="sub" x="320" y="322" text-anchor="middle" dominant-baseline="middle" font-size="13">Central policy, shared memory, SLO-driven multi-agent coordination</text>
          </svg>
        </figure>

        <p class="text-sm md:text-base text-neutral-300">A coordinating brain assigns roles, enforces policy, and routes work across specialized agents and workflows.</p>
        <ul class="mt-4 text-sm md:text-base text-neutral-300 space-y-2">
          <li>â€¢ Orchestrator with global guardrails</li>
          <li>â€¢ Dev, SaaS, Builder, Workspace agents + workflows</li>
          <li>â€¢ Shared memory/SLOs across the mesh</li>
        </ul>
      </article>

    </div>
  </div>
</section>


<!-- Footer -->
<footer class="bg-[#1B1D22] border-t border-white/10 py-10 mt-12 text-sm">
  <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center md:items-start justify-between gap-8">
    <div class="text-center md:text-left">
      <img src="image.png" alt="Engini logo" class="w-28 h-auto mx-auto md:mx-0" loading="lazy" decoding="async"/>
      <p class="text-white/50 mt-3">Â© <span id="current-year">2025</span> Engini. All rights reserved.</p>
    </div>
    <div class="grid grid-cols-2 sm:grid-cols-3 gap-8 text-white/70">
      <div><p class="font-semibold text-white mb-2">Platform</p>
        <ul class="space-y-1"><li><a href="platform.html#architecture" class="hover:underline">Architecture</a></li><li><a href="platform.html#agent-os" class="hover:underline">Agent OS</a></li><li><a href="platform.html#security" class="hover:underline">Security</a></li></ul></div>
      <div><p class="font-semibold text-white mb-2">Build</p>
        <ul class="space-y-1"><li><a href="platform.html#connectors" class="hover:underline">Connectors</a></li><li><a href="platform.html#workflows" class="hover:underline">Workflow Builder</a></li><li><a href="platform.html#playbooks" class="hover:underline">AI Playbooks</a></li></ul></div>
      <div><p class="font-semibold text-white mb-2">Resources</p>
        <ul class="space-y-1"><li><a href="https://engini.io/help/" class="hover:underline">Docs</a></li><li><a href="https://engini.io/blog/" class="hover:underline">Blog</a></li><li><a href="https://engini.io/become-a-partner/" class="hover:underline">Partners</a></li></ul></div>
    </div>
  </div>
</footer>

<!-- App scripts -->
<script defer>
  /** ================== CONFIG ================== **/
  window.GEMINI_API_KEY = window.GEMINI_API_KEY || "AIzaSyCwGOKtGr5G2NdmRRwwTZeREYVFheQ5Se0"; // insert your API key here if needed
  const GEMINI_MODEL = "gemini-1.5-flash";

  /** ================== DOM HELPERS ================== **/
  const $  = (s,r=document)=>r.querySelector(s);
  const $$ = (s,r=document)=>[...r.querySelectorAll(s)];

  /* Icons map -> /icons/*.png */
  const ICONS = {
    servicenow:"icons/servicenow.png", okta:"icons/okta.png", google:"icons/google.png",
    slack:"icons/slack.png", microsoft:"icons/microsoft.png", quickbooks:"icons/quickbooks.png",
    netsuite:"icons/netsuite.png", jira:"icons/jira.png", workday:"icons/workday.png",
    salesforce:"icons/salesforce.png", hubspot:"icons/hubspot.png", zendesk:"icons/zendesk.png",
    intercom:"icons/intercom.png", mailchimp:"icons/mailchimp.png", marketo:"icons/marketo.png",
    outreach:"icons/outreach.png"
  };

  /** ================== WORKERS MOCK DATA ================== **/
  const WORKERS = [
    { id:"it", title:"IT", subtitle:"AI Worker", skills:["Onboarding/Offboarding","Identity and Access","Account unlock"], apps:["servicenow","okta","google","slack"], more:{ summary:"Automates JML, identity and helpdesk.", playbooks:["Joiner/Mover/Leaver","Access reviews"] } },
    { id:"finance", title:"Finance", subtitle:"AI Worker", skills:["Invoice processing","Expense review"], apps:["quickbooks","netsuite","slack"], more:{ summary:"Speeds AP/AR with smart matching.", playbooks:["3-way match","Monthly close"] } }
  ];

  const pill    = (t,dim=false)=>`<span class="wc-pill ${dim?'dim':''}">${t}</span>`;
  const appIcon = (k)=> ICONS[k] ? `<img src="${ICONS[k]}" alt="${k}" loading="lazy"/>` : `<div class="fallback">${(k||'?').slice(0,2).toUpperCase()}</div>`;

  function cardTemplate(w){
    const primary = w.skills.map(s=>pill(s)).join("");
    const apps    = (w.apps||[]).map(k=>`<span class="wc-app">${appIcon(k)}</span>`).join("");
    return `
      <article class="wc-card" data-id="${w.id}" aria-expanded="false">
        <header class="wc-toggle flex items-start gap-3 cursor-pointer">
          <div class="wc-avatar"><div class="w-2 h-2 rounded-full bg-white/80"></div></div>
          <div><h3 class="text-xl font-semibold">${w.title}</h3><p class="text-white/60">${w.subtitle}</p></div>
        </header>
        <div class="mt-4 flex flex-wrap gap-2">${primary}</div>
        <div class="wc-divider my-3"></div>
        <div class="flex items-center gap-2">${apps}</div>
        <section class="wc-more mt-4 pt-3 border-t border-white/10">
          <p class="text-sm text-white/80">${w.more?.summary||""}</p>
          ${(w.more?.playbooks?.length?`<div class="mt-2"><p class="text-xs wc-badge mb-1">Playbooks</p><div class="flex flex-wrap gap-2">${w.more.playbooks.map(pill).join("")}</div></div>`:"")}
        </section>
      </article>`;
  }

  function renderCards(list=WORKERS){
    $("#worker-cards").innerHTML = list.map(cardTemplate).join("");
  }
  renderCards();

  /** ================== CHAT UI ================== **/
  const shell     = $('#chat-shell');
  const chatMsgs  = $('#chat-messages');
  const chatForm  = $('#chat-form');
  const chatInput = $('#chat-input');
  const sendBtn   = $('#send-button');
  const sendIcon  = $('#send-icon');
  const sendSpin  = $('#send-spin');

  function addMsg(sender, text) {
    const wrap = document.createElement('div');
    wrap.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;

    const bubble = document.createElement('div');
    bubble.className = `relative p-3 rounded-2xl max-w-[80%] shadow-lg whitespace-pre-wrap
                        ${sender === 'user'
                            ? 'bg-[var(--accent)] text-[#0B0C0E] rounded-br-none'
                            : 'bg-[#151618] text-neutral-300 rounded-bl-none'}`;

    wrap.appendChild(bubble);
    chatMsgs.appendChild(wrap);

    if (sender === 'ai') {
      let i=0; const speed=15;
      const iv=setInterval(()=> {
        bubble.textContent=text.substring(0,i++);
        chatMsgs.scrollTop=chatMsgs.scrollHeight;
        if(i>text.length) clearInterval(iv);
      }, speed);
    } else {
      bubble.textContent=text;
      chatMsgs.scrollTop=chatMsgs.scrollHeight;
    }
  }

  function typingDots(){
    const wrap=document.createElement('div');
    wrap.className='flex justify-start';
    wrap.innerHTML=`<div class="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>`;
    return wrap;
  }

  function setGenerating(on){
    shell?.classList.toggle('generating',on);
    chatInput.disabled=on; sendBtn.disabled=on;
    sendIcon.classList.toggle('hidden',on);
    sendSpin.classList.toggle('hidden',!on);
  }

  /** Animated Placeholder **/
  const PLACEHOLDERS=[
    "â€¦provisions new hires across Okta, Slack, and Google",
    "â€¦triages Zendesk tickets and escalates to Jira",
    "â€¦keeps Salesforce pipeline clean and nudges reps",
    "â€¦runs 3-way match for AP invoices in NetSuite",
    "â€¦onboards employees and answers HR policies"
  ];
  function cyclePlaceholder(el,lines=PLACEHOLDERS){
    let idx=0,phase='type',i=0,holdTimer;
    const tick=()=>{
      const full=lines[idx];
      if(phase==='type'){
        el.setAttribute('placeholder','Ask Engini to create a Worker that '+full.slice(0,i++));
        if(i>full.length){phase='hold';holdTimer=setTimeout(()=>{phase='erase';tick();},1400);return;}
      }else if(phase==='erase'){
        el.setAttribute('placeholder','Ask Engini to create a Worker that '+full.slice(0,--i));
        if(i<=0){phase='type';idx=(idx+1)%lines.length;}
      }
      setTimeout(tick,phase==='type'?28:18);
    };
    tick();
  }
  cyclePlaceholder(chatInput);

  /** ================== GEMINI LAYER ================== **/
  async function geminiReply(prompt, context=""){
    if(!window.GEMINI_API_KEY){
      await new Promise(r=>setTimeout(r,400));
      return `(mock reply) ${prompt.slice(0,200)}â€¦`;
    }
    const url=`https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${encodeURIComponent(window.GEMINI_API_KEY)}`;
    const body={
      contents:[{role:"user",parts:[{text:
`You are Enginiâ€™s friendly AI coworker. 
Act conversational, curious, and naturalâ€”like a colleague guiding the user.
Acknowledge what they said, then smoothly ask the next step.
Be concise, supportive, and vary tone (ðŸ‘, ðŸš€, ðŸ‘Œ). 

Context: ${context}

User: ${prompt}`}]}]
    };
    const res=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
    if(!res.ok) throw new Error('Gemini error: '+res.status);
    const data=await res.json();
    return data?.candidates?.[0]?.content?.parts?.map(p=>p.text).join("") || "Hmm, I couldnâ€™t think of a good next step.";
  }

  /** ================== GUIDED BUILDER ================== **/
  let draftWorker={department:"",team:"",deliverable:"",workflows:[],tasks:[],systems:[],overview:"",onboarding:""};
  let step=0;
  const steps=[
    "Which department is this Worker for?",
    "Which team inside that department?",
    "Whatâ€™s the key deliverable this worker should own?",
    "List 2â€“3 workflows to automate (comma separated).",
    "What are the main tasks? (comma separated).",
    "Which core systems should it integrate with? (comma separated).",
    "Write a short overview of this worker.",
    "Describe the onboarding plan briefly."
  ];

  function finalizeWorker(){
    const worker={...draftWorker,id:'custom-'+Date.now()};
    const arr=JSON.parse(localStorage.getItem('customWorkers')||'[]');
    arr.push(worker); localStorage.setItem('customWorkers',JSON.stringify(arr));
    addMsg("ai","âœ… Your Worker has been created and saved! Check it out under 'My Workers'.");
    draftWorker={department:"",team:"",deliverable:"",workflows:[],tasks:[],systems:[],overview:"",onboarding:""};
    step=0;
  }

  /** Auto-grow textarea **/
  function autoGrow(){
    chatInput.style.height='auto';
    chatInput.style.height=Math.min(chatInput.scrollHeight,220)+'px';
  }
  chatInput.addEventListener('input',autoGrow);

  /** Handle Send **/
  async function handleSend(){
    const text=chatInput.value.trim(); if(!text) return;
    addMsg('user',text); chatInput.value=''; autoGrow();
    setGenerating(true); const dots=typingDots(); chatMsgs.appendChild(dots); chatMsgs.scrollTop=chatMsgs.scrollHeight;

    try{
      switch(step){
        case 0: draftWorker.department=text; break;
        case 1: draftWorker.team=text; break;
        case 2: draftWorker.deliverable=text; break;
        case 3: draftWorker.workflows=text.split(',').map(s=>s.trim()).filter(Boolean); break;
        case 4: draftWorker.tasks=text.split(',').map(s=>s.trim()).filter(Boolean); break;
        case 5: draftWorker.systems=text.split(',').map(s=>s.trim()).filter(Boolean); break;
        case 6: draftWorker.overview=text; break;
        case 7: draftWorker.onboarding=text; finalizeWorker(); dots.remove(); setGenerating(false); return;
      }

      const nextQ=steps[step]||"Anything else?";
      const ctx=JSON.stringify(draftWorker,null,2);
      const reply=await geminiReply(`User just answered step #${step}: "${text}". Next step: "${nextQ}"`,ctx);

      dots.remove(); addMsg('ai',reply||`Got it! ${nextQ}`); step++;
    }catch(err){
      console.error(err); dots.remove();
      addMsg('ai',`Got it! ${steps[step]||"Let's continueâ€¦"}`); step++;
    }finally{ setGenerating(false); }
  }

  chatForm.addEventListener('submit',(e)=>{e.preventDefault();});
  sendBtn.addEventListener('click',handleSend);
</script>

</body>
</html>
